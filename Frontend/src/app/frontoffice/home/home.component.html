<!-- Home Component -->

<!-- Slider Section -->
<section class="section-slide">
  <div class="wrap-slick1 rs1-slick1">
    <div class="slick1">

      <!-- Slide 1 -->
      <div class="item-slick1" style="background-image: url('assets/images/slide-01.jpg');">
        <div class="container h-full">
          <div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">

            <div class="layer-slick1 animated visible-false" data-appear="fadeInDown" data-delay="0">
              <span class="ltext-101 cl2 respon2">
                Women Collection 2018
              </span>
            </div>

            <div class="layer-slick1 animated visible-false" data-appear="fadeInUp" data-delay="800">
              <h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
                NEW SEASON
              </h2>
            </div>

            <div class="layer-slick1 animated visible-false" data-appear="zoomIn" data-delay="1600">
              <a href="product.html" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
                Shop Now
              </a>
            </div>

          </div>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="item-slick1" style="background-image: url('assets/images/slide-02.jpg');">
        <div class="container h-full">
          <div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">

            <div class="layer-slick1 animated visible-false" data-appear="rollIn" data-delay="0">
              <span class="ltext-101 cl2 respon2">
                Men New-Season
              </span>
            </div>

            <div class="layer-slick1 animated visible-false" data-appear="lightSpeedIn" data-delay="800">
              <h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
                Jackets & Coats
              </h2>
            </div>

            <div class="layer-slick1 animated visible-false" data-appear="slideInUp" data-delay="1600">
              <a href="product.html" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
                Shop Now
              </a>
            </div>

          </div>
        </div>
      </div>

      <!-- Slide 3 -->
      <div class="item-slick1" style="background-image: url('assets/images/slide-03.jpg');">
        <div class="container h-full">
          <div class="flex-col-l-m h-full p-t-100 p-b-30 respon5">

            <div class="layer-slick1 animated visible-false" data-appear="rotateInDownLeft" data-delay="0">
              <span class="ltext-101 cl2 respon2">
                Men Collection 2018
              </span>
            </div>

            <div class="layer-slick1 animated visible-false" data-appear="rotateInUpRight" data-delay="800">
              <h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1">
                New arrivals
              </h2>
            </div>

            <div class="layer-slick1 animated visible-false" data-appear="rotateIn" data-delay="1600">
              <a href="product.html" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04">
                Shop Now
              </a>
            </div>

          </div>
        </div>
      </div>

    </div>

    <!-- Pagination Dots -->
    <div class="wrap-slick1-dots p-lr-10"></div>

    <!-- Left/Right Arrows -->
    <div class="wrap-slick1-arrows flex-sb-m flex-w"></div>
  </div>
</section>

<div class="home-container">
  <div class="post-list-container">
    <h2 class="section-title">üì¢ Growthnest Community</h2>

    <!-- Tag Filter -->
    <div class="filter-container">
      <label for="tagFilter">üîç Filter by Tag:</label>
      <select id="tagFilter" [(ngModel)]="selectedTag" (change)="onTagChange()">
        <option value="">All</option>
        <option *ngFor="let tag of tags" [value]="tag">{{ tag }}</option>
      </select>
    </div>

    <!-- Posts -->
    <div *ngFor="let post of visiblePosts" class="post-card">
      <div class="post-header">
        <h3>{{ post.title }}</h3>
        <span class="tag">{{ post.tags }}</span>
      </div>
      <p class="post-content">{{ post.content }}</p>

      <!-- Media Display -->
      <div class="media-section" *ngIf="post.image || post.video">
        <img *ngIf="post.image"
             [src]="getMediaUrl(post.image)"
             alt="Post Image"
             class="post-media"
             (error)="handleImageError($event)" />

        <video *ngIf="post.video" controls class="post-media">
          <source [src]="getMediaUrl(post.video)" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>

      <div class="post-meta">
        <span>üïí {{ post.createdAt | date:'short' }}</span>
        <div class="reactions">
          <button (click)="addReact(post.idp, 'LIKE')" class="reaction-btn like-btn">
            üëç {{ likesMap[post.idp] || 0 }}
          </button>
          <button (click)="addReact(post.idp, 'DISLIKE')" class="reaction-btn dislike-btn">
            üëé {{ dislikesMap[post.idp] || 0 }}
          </button>
        </div>
        <button (click)="toggleResponses(post.idp)" class="toggle-responses-btn">
          {{ showResponsesMap[post.idp] ? 'Hide Responses' : 'Show Responses' }} ({{ (responsesMap[post.idp] || []).length }})
        </button>
      </div>

      <!-- Responses -->
      <div class="response-section" *ngIf="showResponsesMap[post.idp]">
        <h4>Responses</h4>
        <div *ngFor="let response of responsesMap[post.idp] || []" class="response-item">
          <div class="response-header">
            <span class="user-name">{{ response.user?.fullName || 'Anonymous' }}</span>
            <span class="response-date">{{ response.createdAt | date:'short' }}</span>
          </div>
          <p class="response-content">{{ response.respons }}</p>
        </div>

        <!-- Add new response -->
        <div class="new-response">
          <textarea [(ngModel)]="newResponse[post.idp]" placeholder="Write your response..." rows="3"></textarea>
          <button (click)="submitResponse(post.idp)" class="submit-btn">Submit Response</button>
        </div>
      </div>
    </div>

    <!-- Load More -->
    <div class="load-more">
      <button (click)="loadMore()" *ngIf="visiblePosts.length < posts.length">
        üîΩ Load More
      </button>
    </div>
  </div>
</div>
