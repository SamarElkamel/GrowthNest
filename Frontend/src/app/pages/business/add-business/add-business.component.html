<div class="add-business-container">
  <h1>Add a Business</h1>
  <form [formGroup]="businessForm" (ngSubmit)="onSubmit()" aria-label="Business addition form">
    <div class="form-group">
      <label for="name">Business Name</label>
      <input
        id="name"
        formControlName="name"
        placeholder="Enter business name"
        [ngClass]="{
          'invalid': name.touched && name.invalid,
          'valid': name.touched && name.valid
        }"
        aria-required="true"
      />
      <div *ngIf="name.touched && name.invalid" class="error">
        <div *ngIf="name.errors?.['required']">Name is required.</div>
        <div *ngIf="name.errors?.['minlength']">Name must be at least 3 characters.</div>
        <div *ngIf="name.errors?.['maxlength']">Name cannot exceed 50 characters.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <input
        id="description"
        formControlName="description"
        placeholder="Enter description"
        [ngClass]="{
          'invalid': description.touched && description.invalid,
          'valid': description.touched && description.valid
        }"
        aria-required="true"
      />
      <div *ngIf="description.touched && description.invalid" class="error">
        <div *ngIf="description.errors?.['required']">Description is required.</div>
        <div *ngIf="description.errors?.['minlength']">Description must be at least 10 characters.</div>
        <div *ngIf="description.errors?.['maxlength']">Description cannot exceed 255 characters.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="instagramPageName">Instagram Page Name</label>
      <input
        id="instagramPageName"
        formControlName="instagramPageName"
        placeholder="Enter Instagram page name (optional)"
        [ngClass]="{
          'invalid': instagramPageName.touched && instagramPageName.invalid,
          'valid': instagramPageName.touched && instagramPageName.valid
        }"
      />
      <div *ngIf="instagramPageName.touched && instagramPageName.invalid" class="error">
        <div *ngIf="instagramPageName.errors?.['maxlength']">Name cannot exceed 30 characters.</div>
        <div *ngIf="instagramPageName.errors?.['pattern']">Use only letters, numbers, periods or underscores.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="categorieBusiness">Category</label>
      <select id="categorieBusiness" formControlName="categorieBusiness" aria-required="true">
        <option [ngValue]="null" disabled>Select a category</option>
        <option *ngFor="let category of categories" [ngValue]="category">{{ category }}</option>
      </select>
      <div *ngIf="categorieBusiness.touched && categorieBusiness.invalid" class="error">
        <div *ngIf="categorieBusiness.errors?.['required']">Category is required.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="logoInput">Logo</label>
      <input
        id="logoInput"
        type="file"
        accept="image/jpeg,image/png"
        (change)="onLogoSelected($event)"
        style="display: none;"
        aria-label="Select logo"
      />
      <button type="button" (click)="triggerFileInput('logo')" [disabled]="isSubmitting">Choose Logo</button>
      <div *ngIf="logoPreview" class="preview">
        <img [src]="logoPreview" alt="Logo preview" style="max-width: 200px;" />
      </div>
    </div>

    <div class="form-group">
      <label for="pdfInput">PDF Document</label>
      <input
        id="pdfInput"
        type="file"
        accept="application/pdf"
        (change)="onPdfSelected($event)"
        style="display: none;"
        aria-label="Select PDF"
      />
      <button type="button" (click)="triggerFileInput('pdf')" [disabled]="isSubmitting">Choose PDF</button>
      <div *ngIf="pdfName" class="preview">
        <p>Selected file: {{ pdfName }}</p>
      </div>
    </div>

    <button type="submit" [disabled]="businessForm.invalid || isSubmitting" aria-label="Add business">
      {{ isSubmitting ? 'Submitting...' : 'Add Business' }}
    </button>
  </form>
</div>