<div class="container dynamic-business-table">
  <h2 class="card-title"> Coupon Management</h2>

  <div class="table-wrapper">
    
    <!-- Coupon Management Section -->
    <div class="table-header d-flex justify-content-between align-items-center">
      <div>
        <h3>Coupon List</h3>
        <p>{{ coupons.length || 0 }} coupons available</p>
      </div>
    
      <button type="button" class="btn btn-success" routerLink="/admin/coupons/create" id="butt">
        <i class="bi bi-plus"></i> Create Coupon
      </button>
    </div>
    
   
    <div class="table-responsive">
      <table class="business-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Code</th>
            <th>Discount %</th>
            <th>Expiry</th>
            <th>Status</th>
            <th>Owner</th>
            <th>Usage</th>
            <th>Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let c of coupons; index as i">
            <td>{{ i + 1 }}</td>
            <td class="business-name">{{ c.code }}</td>
            <td>{{ c.discountPercentage }}%</td>
            <td>{{ c.expiryDate | date: 'mediumDate' }}</td>
            <td>
              <span class="category-badge" 
      [ngClass]="c.active ? 'bg-success' : 'bg-danger'" 
      style="font-size: 0.75rem; padding: 2px 6px; line-height: 2;">
  {{ c.active ? 'Active' : 'Inactive' }}
</span>

            </td>
            <td>{{ c.ownerName }}</td>
            <td>{{ c.usageCount }} / {{ c.maxUses }}</td>
            <td class="actions">
              <div class="action-buttons">
                <button class="btn-icon details" (click)="toggleActive(c.id)">
                  <i class="fas fa-sync-alt"></i>
                </button>
                <button class="btn-icon delete" (click)="deleteCoupon(c.id)">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </div>
            </td>
          </tr>

          <tr *ngIf="coupons.length === 0" class="no-results">
            <td colspan="8">
              <div class="empty-state">
                <i class="fas fa-ticket-alt fa-3x"></i>
                <p>No coupons found</p>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>

